<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>LINE Login Demo</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div class="container">
        <a href="javascript:;" id="lineLoginBtn">
            <img src="./LineLoginButtonImage/images/DeskTop/1x/44dp/btn_login_base.png" alt="LINE 登入按鈕">
            <img src="./LineLoginButtonImage/images/DeskTop/1x/44dp/btn_login_hover.png" alt="LINE 登入按鈕_hover">
        </a>
    </div>

    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.js'></script>
    <script src="https://d.line-scdn.net/liff/1.0/sdk.js"></script>
    <script>
        (function ($, liff) {
            window.onload = function (e) {
                liff.init(function (data) {
                    initializeApp();
                });
            };

            $('#lineLoginBtn').on('click', function(e) {
                let client_id = '1653311283';
                let redirect_uri = 'https://piedasing.github.io/line-service-demo/';
                let link = 'https://access.line.me/oauth2/v2.1/authorize?';
                link += 'response_type=code';
                link += '&client_id=' + client_id;
                link += '&redirect_uri=' + redirect_uri;
                link += '&state=login';
                link += '&scope=openid%20profile';
                window.location.href = link;
            });

            function initializeApp(data) {
                const accessToken = liff.getAccessToken();
                // 再將 accessToken 發送給後端 API 處理，就能完成會員登入的動作囉
            }
        })($, liff)
    </script>
</body>
</html>