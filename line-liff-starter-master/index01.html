<!DOCTYPE html>
<html>
<head>
     <meta name="viewport" content="width=device-width, initial-scale=1" />
     <title>LIFF 表單測試</title>
     <script src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
     <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
     <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
 </head>
 <body>
     <div class="row" style="margin: 10px">
         <div class="col-12" style="margin: 10px">
             <label>信箱：</label>
             <input type="text" id="name" class="form-control" />
             <br />
             <label>驗證碼：</label>
             <input type="text" id="identify"　class="form-control" />
             <br />
             <button class="btn btn-success btn-block" id="send">寄送驗證碼</button>
             <button class="btn btn-success btn-block" id="sure">確認</button>
         </div>
     </div>
 
     <script src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
     <script>
        function initializeLiff(myLiffId) {
          liff
            .init({
              liffId: myLiffId,
            })
            .then(() => {
              alert('LIFF init success!');
            })
            .catch(err => {
              alert(`error: ${JSON.stringify(err)}`);
            });
        }
  
        document.addEventListener('DOMContentLoaded', () => {
          fetch(`/send-id`)
            .then(reqResponse => reqResponse.json())
            .then(jsonResponse => {
              let myLiffId = jsonResponse.id;
              initializeLiff(myLiffId);
            })
            .catch(err => {
              alert(`error: ${JSON.stringify(err)}`);
            });
        });
      </script>
</body>
</html>